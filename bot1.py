Python 3.14.0 (tags/v3.14.0:ebf955d, Oct  7 2025, 10:15:03) [MSC v.1944 64 bit (AMD64)] on win32
Enter "help" below or click "Help" above for more information.
Aimport os
import logging
import random
from telegram import Update, ReplyKeyboardMarkup, InlineKeyboardMarkup, InlineKeyboardButton
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes, CallbackQueryHandler

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏
TOKEN = os.getenv('TELEGRAM_TOKEN', '8473801558:AAFmRkmPU8vJmcmQET5bATmD_NVwc9LWi2Q')
PORT = int(os.environ.get('PORT', 5000))

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)

# –î–∞–Ω–Ω—ã–µ –¥–ª—è –±–æ—Ç–∞
MANTRA_STUDENT = [
    "üåü –Ø —Å–ø—Ä–∞–≤–ª—é—Å—å. –Ø –≥–æ—Ç–æ–≤–∏–ª—Å—è, –∏ —É –º–µ–Ω—è –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è.",
    "üí´ –û–¥–∏–Ω —à–∞–≥ –∑–∞ —Ä–∞–∑. –°–µ–π—á–∞—Å —è –¥—ã—à—É, –∞ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø–æ–¥–æ–∂–¥–µ—Ç.",
    "üìö –≠—Ç–æ—Ç —ç–∫–∑–∞–º–µ–Ω ‚Äî –ª–∏—à—å –º–∞–ª–µ–Ω—å–∫–∞—è —á–∞—Å—Ç—å –º–æ–µ–π –∂–∏–∑–Ω–∏.",
    "üåä –ú–æ–µ –≤–æ–ª–Ω–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —ç–Ω–µ—Ä–≥–∏—è, –∫–æ—Ç–æ—Ä—É—é —è –º–æ–≥—É –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤ –Ω—É–∂–Ω–æ–µ —Ä—É—Å–ª–æ.",
    "üïäÔ∏è –Ø –¥—ã—à—É —Å–ø–æ–∫–æ–π–Ω–æ. –Ø –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –í—Å–µ –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ.",
    "üî• –Ø —Å–∏–ª—å–Ω–µ–µ —Å–≤–æ–∏—Ö —Å—Ç—Ä–∞—Ö–æ–≤. –Ø –ø—Ä–æ–π–¥—É —á–µ—Ä–µ–∑ —ç—Ç–æ.",
    "üéØ –Ø —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω –∏ —É–≤–µ—Ä–µ–Ω –≤ —Å–≤–æ–∏—Ö –∑–Ω–∞–Ω–∏—è—Ö."
]

BREATHING_EXERCISES = [
    {"name": "üå¨Ô∏è –¢–µ—Ö–Ω–∏–∫–∞ 4-7-8", "description": "–í–¥–æ—Ö –Ω–∞ 4, –∑–∞–¥–µ—Ä–∂–∫–∞ –Ω–∞ 7, –≤—ã–¥–æ—Ö –Ω–∞ 8"},
    {"name": "üí® –ö–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ", "description": "4-4-4-4: –≤–¥–æ—Ö-–∑–∞–¥–µ—Ä–∂–∫–∞-–≤—ã–¥–æ—Ö-–∑–∞–¥–µ—Ä–∂–∫–∞"},
    {"name": "üéà –î–∏–∞—Ñ—Ä–∞–≥–º–∞–ª—å–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ", "description": "–ú–µ–¥–ª–µ–Ω–Ω—ã–µ –≥–ª—É–±–æ–∫–∏–µ –≤–¥–æ—Ö–∏ –∂–∏–≤–æ—Ç–æ–º"}
]

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.effective_user
    welcome_text = f"""
ü§ó –ü—Ä–∏–≤–µ—Ç, {user.first_name}!

–Ø –±–æ—Ç <b>¬´–ê–Ω—Ç–∏–ü–∞–Ω–∏–∫–∞¬ª</b> ‚Äî —Ç–≤–æ–π –∫–∞—Ä–º–∞–Ω–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ –±–æ—Ä—å–±–µ —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º –ø–µ—Ä–µ–¥ —Å–µ—Å—Å–∏–µ–π.

–í—ã–±–µ—Ä–∏, –∫—Ç–æ —Ç—ã:
    """.strip()
    
    keyboard = [
        ['üéì –Ø —Å—Ç—É–¥–µ–Ω—Ç', 'üë®‚Äçüè´ –Ø –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å'],
        ['‚ÑπÔ∏è –û –±–æ—Ç–µ', 'üÜò –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å']
    ]
    reply_markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
    
    await update.message.reply_text(welcome_text, reply_markup=reply_markup, parse_mode='HTML')

# –ú–µ–Ω—é —Å—Ç—É–¥–µ–Ω—Ç–∞
async def student_menu(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = """
üéí <b>–†–∞–∑–¥–µ–ª –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</b>

–í—ã–±–µ—Ä–∏ —Ç–µ—Ö–Ω–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:
    """.strip()
    
    keyboard = [
        ['üå¨Ô∏è –î—ã—à–∏', 'üåç –ó–∞–∑–µ–º–ª–∏—Å—å'],
        ['üìø –ú–∞–Ω—Ç—Ä–∞', 'üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã'],
        ['üîô –ù–∞–∑–∞–¥']
    ]
    reply_markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
    await update.message.reply_text(text, reply_markup=reply_markup, parse_mode='HTML')

# –ú–µ–Ω—é –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
async def teacher_menu(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = """
üë®‚Äçüè´ <b>–†–∞–∑–¥–µ–ª –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</b>

–ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:
    """.strip()
    
    keyboard = [
        ['üíå –®–∞–±–ª–æ–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏'],
        ['‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∏—Ç—å'],
        ['üîô –ù–∞–∑–∞–¥']
    ]
    reply_markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
    await update.message.reply_text(text, reply_markup=reply_markup, parse_mode='HTML')

# –î—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
async def breathing(update: Update, context: ContextTypes.DEFAULT_TYPE):
    exercise = random.choice(BREATHING_EXERCISES)
    
    text = f"""
{exercise['name']}
{exercise['description']}

üéØ <b>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</b>
1. –°—è–¥—å —É–¥–æ–±–Ω–æ, –∑–∞–∫—Ä–æ–π –≥–ª–∞–∑–∞
2. –°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Å—è –Ω–∞ –¥—ã—Ö–∞–Ω–∏–∏
3. –°–ª–µ–¥—É–π —Ä–∏—Ç–º—É:
   
   üì• –í–î–û–•... 2... 3... 4...
   ‚è∏Ô∏è –î–ï–†–ñ–ò–ú... 5... 6... 7...
   üì§ –í–´–î–û–•... 2... 3... 4... 5... 6... 7... 8...
   
4. –ü–æ–≤—Ç–æ—Ä–∏ 5-10 —Ä–∞–∑

‚ú® <i>–ü–æ—á—É–≤—Å—Ç–≤—É–π, –∫–∞–∫ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —É—Ö–æ–¥–∏—Ç —Å –∫–∞–∂–¥—ã–º –≤—ã–¥–æ—Ö–æ–º...</i>
    """.strip()
    
    await update.message.reply_text(text, parse_mode='HTML')

# –¢–µ—Ö–Ω–∏–∫–∞ –∑–∞–∑–µ–º–ª–µ–Ω–∏—è
async def grounding(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = """
üåç <b>–¢–µ—Ö–Ω–∏–∫–∞ ¬´5-4-3-2-1¬ª</b>

–ü–æ–º–æ–≥–∞–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—Å—Ç–æ—è—â–∏–π –º–æ–º–µ–Ω—Ç –∏ –≤—ã–π—Ç–∏ –∏–∑ –ø–æ—Ç–æ–∫–∞ —Ç—Ä–µ–≤–æ–∂–Ω—ã—Ö –º—ã—Å–ª–µ–π.

–ù–∞–π–¥–∏ –≤–æ–∫—Ä—É–≥ —Å–µ–±—è:

üëÅÔ∏è <b>5 –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –í–ò–î–ò–®–¨</b>
(—Å—Ç–æ–ª, –ª–∞–º–ø–∞, –∫–Ω–∏–≥–∞, –æ–∫–Ω–æ, —Ç–µ–ª–µ—Ñ–æ–Ω...)

‚úã <b>4 –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—à—å –ü–û–¢–†–û–ì–ê–¢–¨</b>
(–æ–¥–µ–∂–¥–∞, –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å —Å—Ç–æ–ª–∞, –∫–æ–∂–∞ —Ä—É–∫, —á–∞—à–∫–∞...)

üëÇ <b>3 –∑–≤—É–∫–∞, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –°–õ–´–®–ò–®–¨</b>
(—Ç–∏—à–∏–Ω–∞, –≥—É–ª –∫–æ–º–ø—å—é—Ç–µ—Ä–∞, –º–æ–µ –¥—ã—Ö–∞–Ω–∏–µ...)

üëÉ <b>2 –∑–∞–ø–∞—Ö–∞, –∫–æ—Ç–æ—Ä—ã–µ —á—É–≤—Å—Ç–≤—É–µ—à—å</b>
(–≤–æ–∑–¥—É—Ö, –∫–æ—Ñ–µ, –¥—É—Ö–∏...)

üëÖ <b>1 –≤–∫—É—Å, –∫–æ—Ç–æ—Ä—ã–π –æ—â—É—â–∞–µ—à—å</b>
> –ª—é–±–∏–º—ã–π‚ù§Ô∏è:
(–ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–ª–æ—Ç–æ–∫ –≤–æ–¥—ã, –≤–∫—É—Å –≤–æ —Ä—Ç—É...)

<i>–°–¥–µ–ª–∞–π –≥–ª—É–±–æ–∫–∏–π –≤–¥–æ—Ö. –ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Ç–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ?</i>
    """.strip()
    
    await update.message.reply_text(text, parse_mode='HTML')

# –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–∞–Ω—Ç—Ä
async def mantra(update: Update, context: ContextTypes.DEFAULT_TYPE):
    mantra = random.choice(MANTRA_STUDENT)
    
    text = f"""
üìø <b>–¢–≤–æ—è –º–∞–Ω—Ç—Ä–∞ –Ω–∞ —Å–µ–π—á–∞—Å:</b>

{mantra}

<i>–ü—Ä–æ–∏–∑–Ω–µ—Å–∏ —ç—Ç–æ –ø—Ä–æ —Å–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑. –ü–æ–≤–µ—Ä—å –≤ —ç—Ç–∏ —Å–ª–æ–≤–∞.</i>
    """.strip()
    
    keyboard = [[InlineKeyboardButton("üîÑ –î—Ä—É–≥–∞—è –º–∞–Ω—Ç—Ä–∞", callback_data='new_mantra')]]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    await update.message.reply_text(text, reply_markup=reply_markup, parse_mode='HTML')

# –°–æ–≤–µ—Ç—ã –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
async def student_tips(update: Update, context: ContextTypes.DEFAULT_TYPE):
    tips = [
        "üìñ –†–∞–∑–±–µ–π –º–∞—Ç–µ—Ä–∏–∞–ª –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ 25 –º–∏–Ω—É—Ç (—Ç–µ—Ö–Ω–∏–∫–∞ Pomodoro)",
        "üí§ –ù–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ —Å–æ–Ω - –æ–Ω –≤–∞–∂–Ω–µ–µ –Ω–æ—á–Ω–æ–π –∑—É–±—Ä–µ–∂–∫–∏",
        "üö∂ –î–µ–ª–∞–π –ø–µ—Ä–µ—Ä—ã–≤—ã –∏ –Ω–µ–º–Ω–æ–≥–æ –¥–≤–∏–≥–∞–π—Å—è",
        "üíß –ü–µ–π –≤–æ–¥—É - –æ–±–µ–∑–≤–æ–∂–∏–≤–∞–Ω–∏–µ —É—Å–∏–ª–∏–≤–∞–µ—Ç —Å—Ç—Ä–µ—Å—Å",
        "üçé –ü–∏—Ç–∞–π—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ, –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞–π –ø—Ä–∏–µ–º—ã –ø–∏—â–∏",
        "üéß –ò—Å–ø–æ–ª—å–∑—É–π –±–µ–ª—ã–π —à—É–º –∏–ª–∏ —Å–ø–æ–∫–æ–π–Ω—É—é –º—É–∑—ã–∫—É –¥–ª—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏"
    ]
    
    text = "üìö <b>–ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏:</b>\n\n" + "\n".join(f"‚Ä¢ {tip}" for tip in tips)
    await update.message.reply_text(text, parse_mode='HTML')

# –®–∞–±–ª–æ–Ω—ã –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
async def support_templates(update: Update, context: ContextTypes.DEFAULT_TYPE):
    templates = [
        "–í–∏–∂—É, —á—Ç–æ —Ç—ã –ø–µ—Ä–µ–∂–∏–≤–∞–µ—à—å. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ —ç–∫–∑–∞–º–µ–Ω–æ–º. –¢—ã —Ö–æ—Ä–æ—à–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª—Å—è, —É —Ç–µ–±—è –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è! üí´",
        "–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–æ–ø—Ä–æ—Å! –í–æ–ª–Ω–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ–¥ —ç–∫–∑–∞–º–µ–Ω–æ–º - —ç—Ç–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ. –ü–æ–º–Ω–∏, —á—Ç–æ —Ç—ã —É—Å–µ—Ä–¥–Ω–æ —Ä–∞–±–æ—Ç–∞–ª –∏ –≥–æ—Ç–æ–≤ –∫ —ç—Ç–æ–º—É. üìö",
        "–ü–æ–Ω–∏–º–∞—é —Ç–≤–æ–µ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ. –ù–æ –∑–Ω–∞–π, —á—Ç–æ —Ç—ã –æ–±–ª–∞–¥–∞–µ—à—å –≤—Å–µ–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏. –î—ã—à–∏ –≥–ª—É–±–∂–µ, —Ç—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è! üåü",
        "–¢–≤–æ–∏ —Å—Ç–∞—Ä–∞–Ω–∏—è –Ω–µ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –Ω–µ–∑–∞–º–µ—á–µ–Ω–Ω—ã–º–∏. –í–µ—Ä—å –≤ —Å–µ–±—è, –∫–∞–∫ —è –≤–µ—Ä—é –≤ —Ç–µ–±—è! –£–¥–∞—á–∏ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω–µ! üçÄ"
    ]
    
    template = random.choice(templates)
    text = f"üíå <b>–®–∞–±–ª–æ–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞:</b>\n\n{template}\n\n<i>–°–∫–æ–ø–∏—Ä—É–π –∏ –æ—Ç–ø—Ä–∞–≤—å —Å—Ç—É–¥–µ–Ω—Ç—É</i>"
    
    keyboard = [[InlineKeyboardButton("üîÑ –î—Ä—É–≥–æ–π —à–∞–±–ª–æ–Ω", callback_data='new_template')]]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    await update.message.reply_text(text, reply_markup=reply_markup, parse_mode='HTML')

# –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å
async def emergency_help(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = """
üÜò <b>–≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å</b>

–ï—Å–ª–∏ —Ç–µ–±–µ –æ—á–µ–Ω—å —Ç—è–∂–µ–ª–æ –∏ —Ç—ã –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è:

üìû <b>–¢–µ–ª–µ—Ñ–æ–Ω—ã –¥–æ–≤–µ—Ä–∏—è (–∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ):</b>
‚Ä¢ 8-800-2000-122 - –ï–¥–∏–Ω—ã–π –æ–±—â–µ—Ä–æ—Å—Å–∏–π—Å–∫–∏–π
‚Ä¢ 8-800-222-55-71 - –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

üíô <b>–ü–æ–º–Ω–∏:</b>
‚Ä¢ –û–±—Ä–∞—â–∞—Ç—å—Å—è –∑–∞ –ø–æ–º–æ—â—å—é - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
‚Ä¢ –¢—ã –Ω–µ –æ–¥–∏–Ω –≤ —Å–≤–æ–∏—Ö –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è—Ö
‚Ä¢ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—ã –≥–æ—Ç–æ–≤—ã –≤—ã—Å–ª—É—à–∞—Ç—å –∏ –ø–æ–º–æ—á—å

üè• <b>–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å–∫–∞—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–ª—É–∂–±–∞:</b>
8-800-700-76-62

<i>–¢—ã –≤–∞–∂–µ–Ω. –¢—ã —Ü–µ–Ω–µ–Ω. –ü–æ–º–æ—â—å —Ä—è–¥–æ–º.</i>
    """.strip()
    
    await update.message.reply_text(text, parse_mode='HTML')

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
async def about(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = """
‚ÑπÔ∏è <b>–û –±–æ—Ç–µ ¬´–ê–Ω—Ç–∏–ü–∞–Ω–∏–∫–∞¬ª</b>

ü§ñ –Ø —Å–æ–∑–¥–∞–Ω, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å —Å—Ç—É–¥–µ–Ω—Ç–∞–º –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º –≤–æ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏.

<b>–ß—Ç–æ —è —É–º–µ—é:</b>
‚Ä¢ –ü—Ä–æ–≤–æ–¥–∏—Ç—å –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
‚Ä¢ –ü–æ–º–æ–≥–∞—Ç—å —Ç–µ—Ö–Ω–∏–∫–∞–º–∏ –∑–∞–∑–µ–º–ª–µ–Ω–∏—è
‚Ä¢ –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ –º–∞–Ω—Ç—Ä—ã
‚Ä¢ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —à–∞–±–ª–æ–Ω—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
‚Ä¢ –ù–∞–ø—Ä–∞–≤–ª—è—Ç—å –∫ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏

üí° <i>–ò—Å–ø–æ–ª—å–∑—É–π –º–µ–Ω—è –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è, –∫–æ–≥–¥–∞ —á—É–≤—Å—Ç–≤—É–µ—à—å —Ç—Ä–µ–≤–æ–≥—É –∏–ª–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ</i>

üÜì <b>–ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ!</b>
    """.strip()
    
    await update.message.reply_text(text, parse_mode='HTML')

# –û–±—Ä–∞–±–æ—Ç–∫–∞ inline –∫–Ω–æ–ø–æ–∫
async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    if query.data == 'new_mantra':
        mantra_text = random.choice(MANTRA_STUDENT)
        new_text = f"üìø <b>–ù–æ–≤–∞—è –º–∞–Ω—Ç—Ä–∞ –¥–ª—è —Ç–µ–±—è:</b>\n\n{mantra_text}"
        await query.edit_message_text(new_text, parse_mode='HTML')
    
    elif query.data == 'new_template':
        templates = [

> –ª—é–±–∏–º—ã–π‚ù§Ô∏è:
"–¢—ã –ø—Ä–æ–¥–µ–ª–∞–ª –±–æ–ª—å—à—É—é —Ä–∞–±–æ—Ç—É! –ü–æ–º–Ω–∏, —á—Ç–æ —ç–∫–∑–∞–º–µ–Ω - —ç—Ç–æ –ª–∏—à—å –æ–¥–∏–Ω –∏–∑ —ç—Ç–∞–ø–æ–≤. –¢—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è! üåü",
            "–í–∏–∂—É —Ç–≤–æ–∏ —Å—Ç–∞—Ä–∞–Ω–∏—è! –í–æ–ª–Ω–µ–Ω–∏–µ - —ç—Ç–æ –ª–∏—à—å –ø—Ä–∏–∑–Ω–∞–∫ —Ç–æ–≥–æ, —á—Ç–æ —Ç–µ–±–µ –≤–∞–∂–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç—É —ç–Ω–µ—Ä–≥–∏—é! üí´",
            "–¢—ã –Ω–µ –æ–¥–∏–Ω –≤ —ç—Ç–∏—Ö –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è—Ö. –í–µ—Å—å –Ω–∞—à –∫—É—Ä—Å —á–µ—Ä–µ–∑ —ç—Ç–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç. –ü–æ–¥–¥–µ—Ä–∂–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞! ü§ù"
        ]
        new_template = random.choice(templates)
        new_text = f"üíå <b>–ù–æ–≤—ã–π —à–∞–±–ª–æ–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∏:</b>\n\n{new_template}"
        await query.edit_message_text(new_text, parse_mode='HTML')

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text
    
    if text == 'üéì –Ø —Å—Ç—É–¥–µ–Ω—Ç':
        await student_menu(update, context)
    elif text == 'üë®‚Äçüè´ –Ø –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å':
        await teacher_menu(update, context)
    elif text == 'üå¨Ô∏è –î—ã—à–∏':
        await breathing(update, context)
    elif text == 'üåç –ó–∞–∑–µ–º–ª–∏—Å—å':
...         await grounding(update, context)
...     elif text == 'üìø –ú–∞–Ω—Ç—Ä–∞':
...         await mantra(update, context)
...     elif text == 'üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã':
...         await student_tips(update, context)
...     elif text == 'üíå –®–∞–±–ª–æ–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏':
...         await support_templates(update, context)
...     elif text == '‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∏—Ç—å':
...         await update.message.reply_text("‚è∞ <b>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!</b>\n\n–ù–µ –∑–∞–±—É–¥—å—Ç–µ –æ—Ç–≤–µ—Ç–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç—É –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞–∂–Ω–∞! üí´", parse_mode='HTML')
...     elif text == 'üÜò –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å':
...         await emergency_help(update, context)
...     elif text == '‚ÑπÔ∏è –û –±–æ—Ç–µ':
...         await about(update, context)
...     elif text == 'üîô –ù–∞–∑–∞–¥':
...         await start(update, context)
...     else:
...         await update.message.reply_text("–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ ü§ó")
... 
... # –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
... def main():
...     # –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
...     application = Application.builder().token(TOKEN).build()
...     
...     # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
...     application.add_handler(CommandHandler("start", start))
...     application.add_handler(CallbackQueryHandler(button_handler))
...     
...     # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
...     application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))
...     
...     # –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
...     application.run_polling()
... 
... if name == '__main__':
...     main()
