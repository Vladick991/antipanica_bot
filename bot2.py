    import os
    import logging
    import random
    from telegram import Update, ReplyKeyboardMarkup, InlineKeyboardMarkup, InlineKeyboardButton
    from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes, CallbackQueryHandler

    # ==================== –ù–ê–°–¢–†–û–ô–ö–ò ====================
    # –¢–æ–∫–µ–Ω –±–µ—Ä–µ—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
    TOKEN = os.getenv('TELEGRAM_TOKEN')

    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –æ—à–∏–±–∫–∏
    logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
    )
    logger = logging.getLogger(__name__)

    # ==================== –ë–ê–ó–ê –î–ê–ù–ù–´–• ====================
    # –í–º–µ—Å—Ç–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç—ã–µ —Å–ø–∏—Å–∫–∏ (–¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏)

    MANTRA_STUDENT = [
    "üåü –Ø —Å–ø—Ä–∞–≤–ª—é—Å—å. –Ø –≥–æ—Ç–æ–≤–∏–ª—Å—è, –∏ —É –º–µ–Ω—è –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è.",
    "üí´ –û–¥–∏–Ω —à–∞–≥ –∑–∞ —Ä–∞–∑. –°–µ–π—á–∞—Å —è –¥—ã—à—É, –∞ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø–æ–¥–æ–∂–¥–µ—Ç.",
    "üìö –≠—Ç–æ—Ç —ç–∫–∑–∞–º–µ–Ω ‚Äî –ª–∏—à—å –º–∞–ª–µ–Ω—å–∫–∞—è —á–∞—Å—Ç—å –º–æ–µ–π –∂–∏–∑–Ω–∏.",
    "üåä –ú–æ–µ –≤–æ–ª–Ω–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —ç–Ω–µ—Ä–≥–∏—è, –∫–æ—Ç–æ—Ä—É—é —è –º–æ–≥—É –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤ –Ω—É–∂–Ω–æ–µ —Ä—É—Å–ª–æ.",
    "üïäÔ∏è –Ø –¥—ã—à—É —Å–ø–æ–∫–æ–π–Ω–æ. –Ø –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –í—Å–µ –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ.",
    "üî• –Ø —Å–∏–ª—å–Ω–µ–µ —Å–≤–æ–∏—Ö —Å—Ç—Ä–∞—Ö–æ–≤. –Ø –ø—Ä–æ–π–¥—É —á–µ—Ä–µ–∑ —ç—Ç–æ.",
    "üéØ –Ø —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω –∏ —É–≤–µ—Ä–µ–Ω –≤ —Å–≤–æ–∏—Ö –∑–Ω–∞–Ω–∏—è—Ö.",
    "üí™ –Ø —É–∂–µ –ø—Ä–µ–æ–¥–æ–ª–µ–≤–∞–ª —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ - —Å–ø—Ä–∞–≤–ª—é—Å—å –∏ —Å —ç—Ç–æ–π.",
    "üåô –ó–∞–≤—Ç—Ä–∞ —ç—Ç–æ—Ç —ç–∫–∑–∞–º–µ–Ω –±—É–¥–µ—Ç –ø–æ–∑–∞–¥–∏, –∞ —è –±—É–¥—É –≥–æ—Ä–¥–∏—Ç—å—Å—è —Å–æ–±–æ–π.",
    "üìñ –ö–∞–∂–¥—ã–π –±–∏–ª–µ—Ç - —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è."
    ]

    BREATHING_EXERCISES = [
    {
        "name": "üå¨Ô∏è –¢–µ—Ö–Ω–∏–∫–∞ 4-7-8",
        "description": "–£—Å–ø–æ–∫–∞–∏–≤–∞–µ—Ç –Ω–µ—Ä–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∑–∞ 1-2 –º–∏–Ω—É—Ç—ã",
        "steps": [
            "–°—è–¥—å —É–¥–æ–±–Ω–æ, —Å–ø–∏–Ω—É –ø—Ä—è–º–æ",
            "üëÉ –ú–µ–¥–ª–µ–Ω–Ω–æ –í–î–û–•–ù–ò–¢–ï –Ω–æ—Å–æ–º –Ω–∞ 4 —Å—á–µ—Ç–∞",
            "‚è∏Ô∏è –ó–ê–î–ï–†–ñ–ò–¢–ï –¥—ã—Ö–∞–Ω–∏–µ –Ω–∞ 7 —Å—á–µ—Ç–æ–≤",
            "üëÑ –ú–µ–¥–ª–µ–Ω–Ω–æ –í–´–î–û–•–ù–ò–¢–ï —Ä—Ç–æ–º –Ω–∞ 8 —Å—á–µ—Ç–æ–≤",
            "üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ 4-6 —Ä–∞–∑"
        ]
    },
    {
        "name": "üí® –ö–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ",
        "description": "–ë–∞–ª–∞–Ω—Å–∏—Ä—É–µ—Ç –Ω–µ—Ä–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É",
        "steps": [
            "–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –∫–≤–∞–¥—Ä–∞—Ç –≤ —É–º–µ",
            "üì• –í–î–û–• –Ω–∞ 4 —Å—á–µ—Ç–∞ (–ø–µ—Ä–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞)",
            "‚è∏Ô∏è –ó–ê–î–ï–†–ñ–ö–ê –Ω–∞ 4 —Å—á–µ—Ç–∞ (–≤—Ç–æ—Ä–∞—è —Å—Ç–æ—Ä–æ–Ω–∞)",
            "üì§ –í–´–î–û–• –Ω–∞ 4 —Å—á–µ—Ç–∞ (—Ç—Ä–µ—Ç—å—è —Å—Ç–æ—Ä–æ–Ω–∞)",
            "‚è∏Ô∏è –ü–ê–£–ó–ê –Ω–∞ 4 —Å—á–µ—Ç–∞ (—á–µ—Ç–≤–µ—Ä—Ç–∞—è —Å—Ç–æ—Ä–æ–Ω–∞)",
            "üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ 5-8 —Ü–∏–∫–ª–æ–≤"
        ]
    },
    {
        "name": "üéà –î–∏–∞—Ñ—Ä–∞–≥–º–∞–ª—å–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ",
        "description": "–ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–∞—Ä–∞—Å–∏–º–ø–∞—Ç–∏—á–µ—Å–∫—É—é –Ω–µ—Ä–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É",
        "steps": [
            "–õ—è–≥—Ç–µ –∏–ª–∏ —Å—è–¥—å—Ç–µ —É–¥–æ–±–Ω–æ",
            "–ü–æ–ª–æ–∂–∏—Ç–µ —Ä—É–∫—É –Ω–∞ –∂–∏–≤–æ—Ç",
            "üì• –ú–µ–¥–ª–µ–Ω–Ω–æ –í–î–û–•–ù–ò–¢–ï –Ω–æ—Å–æ–º, —á—É–≤—Å—Ç–≤—É—è –∫–∞–∫ –∂–∏–≤–æ—Ç –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è",
            "üì§ –ú–µ–¥–ª–µ–Ω–Ω–æ –í–´–î–û–•–ù–ò–¢–ï, —á—É–≤—Å—Ç–≤—É—è –∫–∞–∫ –∂–∏–≤–æ—Ç –æ–ø—É—Å–∫–∞–µ—Ç—Å—è",
            "üîÑ –î—ã—à–∏—Ç–µ —Ç–∞–∫ 2-3 –º–∏–Ω—É—Ç—ã"
        ]
    }
    ]

    SUPPORT_TEMPLATES = [
    "–í–∏–∂—É, —á—Ç–æ —Ç—ã –ø–µ—Ä–µ–∂–∏–≤–∞–µ—à—å. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ —ç–∫–∑–∞–º–µ–Ω–æ–º. –¢—ã —Ö–æ—Ä–æ—à–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª—Å—è, —É —Ç–µ–±—è –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è! üí´",
    "–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–æ–ø—Ä–æ—Å! –í–æ–ª–Ω–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ–¥ —ç–∫–∑–∞–º–µ–Ω–æ–º - —ç—Ç–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ. –ü–æ–º–Ω–∏, —á—Ç–æ —Ç—ã —É—Å–µ—Ä–¥–Ω–æ —Ä–∞–±–æ—Ç–∞–ª –∏ –≥–æ—Ç–æ–≤ –∫ —ç—Ç–æ–º—É. üìö",
    "–ü–æ–Ω–∏–º–∞—é —Ç–≤–æ–µ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ. –ù–æ –∑–Ω–∞–π, —á—Ç–æ —Ç—ã –æ–±–ª–∞–¥–∞–µ—à—å –≤—Å–µ–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏. –î—ã—à–∏ –≥–ª—É–±–∂–µ, —Ç—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è! üåü",
    "–¢–≤–æ–∏ —Å—Ç–∞—Ä–∞–Ω–∏—è –Ω–µ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –Ω–µ–∑–∞–º–µ—á–µ–Ω–Ω—ã–º–∏. –í–µ—Ä—å –≤ —Å–µ–±—è, –∫–∞–∫ —è –≤–µ—Ä—é –≤ —Ç–µ–±—è! –£–¥–∞—á–∏ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω–µ! üçÄ",
    "–ö–∞–∂–¥—ã–π –∏–∑ –Ω–∞—Å –≤–æ–ª–Ω—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —ç–∫–∑–∞–º–µ–Ω–∞–º–∏. –≠—Ç–æ –ø—Ä–∏–∑–Ω–∞–∫ —Ç–æ–≥–æ, —á—Ç–æ —Ç–µ–±–µ –≤–∞–∂–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ –≤–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–∫ —ç–Ω–µ—Ä–≥–∏—é! üî•"
    ]


    # ==================== –ö–û–ú–ê–ù–î–ê /start ====================
    async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –±–æ—Ç–∞"""
    user = update.effective_user

    welcome_text = f"""
    ü§ó <b>–ü—Ä–∏–≤–µ—Ç, {user.first_name}!</b>
    
    –Ø –±–æ—Ç <b>¬´–ê–Ω—Ç–∏–ü–∞–Ω–∏–∫–∞¬ª</b> ‚Äî —Ç–≤–æ–π –∫–∞—Ä–º–∞–Ω–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ –±–æ—Ä—å–±–µ —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º –ø–µ—Ä–µ–¥ —Å–µ—Å—Å–∏–µ–π.
    
    üéØ <b>–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ:</b>
    ‚Ä¢ –£—Å–ø–æ–∫–æ–∏—Ç—å—Å—è –∑–∞ 2 –º–∏–Ω—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –¥—ã—Ö–∞–Ω–∏—è
    ‚Ä¢ –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ "–∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å" —á–µ—Ä–µ–∑ —Ç–µ—Ö–Ω–∏–∫–∏ –∑–∞–∑–µ–º–ª–µ–Ω–∏—è  
    ‚Ä¢ –ù–∞–π—Ç–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ —Å–ª–æ–≤–∞ –≤ —Ç—Ä—É–¥–Ω—É—é –º–∏–Ω—É—Ç—É
    ‚Ä¢ –ù–∞–ø—Ä–∞–≤–∏—Ç—å –∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–º–æ—â–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    
    üëá <b>–í—ã–±–µ—Ä–∏, –∫—Ç–æ —Ç—ã:</b>
    """.strip()

    # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
    keyboard = [
        ['üéì –Ø —Å—Ç—É–¥–µ–Ω—Ç', 'üë®‚Äçüè´ –Ø –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å'],
        ['‚ÑπÔ∏è –û –±–æ—Ç–µ', 'üÜò –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å']
    ]
    reply_markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True, input_field_placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç...")

    await update.message.reply_text(welcome_text, reply_markup=reply_markup, parse_mode='HTML')


    # ==================== –ú–ï–ù–Æ –°–¢–£–î–ï–ù–¢–ê ====================
    async def student_menu(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ú–µ–Ω—é –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤"""
    text = """
    üéí <b>–†–∞–∑–¥–µ–ª –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</b>
    
    –í—ã–±–µ—Ä–∏ —Ç–µ—Ö–Ω–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:
    """.strip()

    keyboard = [
        ['üå¨Ô∏è –î—ã—à–∏', 'üåç –ó–∞–∑–µ–º–ª–∏—Å—å'],
        ['üìø –ú–∞–Ω—Ç—Ä–∞', 'üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã'],
        ['üîô –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é']
    ]
    reply_markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
    await update.message.reply_text(text, reply_markup=reply_markup, parse_mode='HTML')


    # ==================== –î–´–•–ê–¢–ï–õ–¨–ù–´–ï –£–ü–†–ê–ñ–ù–ï–ù–ò–Ø ====================
    async def breathing(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–î—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏"""
    exercise = random.choice(BREATHING_EXERCISES)

    # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å —à–∞–≥–∞–º–∏
    steps_text = "\n".join([f"{i + 1}. {step}" for i, step in enumerate(exercise["steps"])])

    text = f"""
    {exercise['name']}
    <i>{exercise['description']}</i>
    
    üéØ <b>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</b>
    
    {steps_text}
    
    ‚ú® <i>–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Å—è –Ω–∞ –¥—ã—Ö–∞–Ω–∏–∏... –ü–æ—á—É–≤—Å—Ç–≤—É–π, –∫–∞–∫ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —É—Ö–æ–¥–∏—Ç —Å –∫–∞–∂–¥—ã–º –≤—ã–¥–æ—Ö–æ–º...</i>
    """.strip()

    await update.message.reply_text(text, parse_mode='HTML')


    # ==================== –¢–ï–•–ù–ò–ö–ê –ó–ê–ó–ï–ú–õ–ï–ù–ò–Ø ====================
    async def grounding(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–¢–µ—Ö–Ω–∏–∫–∞ 5-4-3-2-1"""
    text = """
    üåç <b>–¢–µ—Ö–Ω–∏–∫–∞ ¬´5-4-3-2-1¬ª</b>
    
    –ü–æ–º–æ–≥–∞–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—Å—Ç–æ—è—â–∏–π –º–æ–º–µ–Ω—Ç –∏ –≤—ã–π—Ç–∏ –∏–∑ –ø–æ—Ç–æ–∫–∞ —Ç—Ä–µ–≤–æ–∂–Ω—ã—Ö –º—ã—Å–ª–µ–π.
    
    üëá <b>–ù–∞–π–¥–∏ –≤–æ–∫—Ä—É–≥ —Å–µ–±—è:</b>
    
    üëÅÔ∏è <b>5 –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –í–ò–î–ò–®–¨</b>
    ‚Ä¢ –°—Ç–æ–ª, –ª–∞–º–ø–∞, –∫–Ω–∏–≥–∞, –æ–∫–Ω–æ, —Ç–µ–ª–µ—Ñ–æ–Ω...
    
    ‚úã <b>4 –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—à—å –ü–û–¢–†–û–ì–ê–¢–¨</b>  
    ‚Ä¢ –û–¥–µ–∂–¥–∞, –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å —Å—Ç–æ–ª–∞, –∫–æ–∂–∞ —Ä—É–∫, —á–∞—à–∫–∞...
    
    üëÇ <b>3 –∑–≤—É–∫–∞, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –°–õ–´–®–ò–®–¨</b>
    ‚Ä¢ –¢–∏—à–∏–Ω–∞, –≥—É–ª –∫–æ–º–ø—å—é—Ç–µ—Ä–∞, –º–æ–µ –¥—ã—Ö–∞–Ω–∏–µ...
    
    üëÉ <b>2 –∑–∞–ø–∞—Ö–∞, –∫–æ—Ç–æ—Ä—ã–µ —á—É–≤—Å—Ç–≤—É–µ—à—å</b>
    ‚Ä¢ –í–æ–∑–¥—É—Ö, –∫–æ—Ñ–µ, –¥—É—Ö–∏...
    
    üëÖ <b>1 –≤–∫—É—Å, –∫–æ—Ç–æ—Ä—ã–π –æ—â—É—â–∞–µ—à—å</b>
    ‚Ä¢ –ü–æ—Å–ª–µ–¥–Ω–∏–π –≥–ª–æ—Ç–æ–∫ –≤–æ–¥—ã, –≤–∫—É—Å –≤–æ —Ä—Ç—É...
    
    <i>–°–¥–µ–ª–∞–π –≥–ª—É–±–æ–∫–∏–π –≤–¥–æ—Ö... –∏ –≤—ã–¥–æ—Ö...</i>
    üòå <b>–ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Ç–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ?</b>
    """.strip()

    await update.message.reply_text(text, parse_mode='HTML')


    # ==================== –ì–ï–ù–ï–†–ê–¢–û–† –ú–ê–ù–¢–† ====================
    async def mantra(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö –º–∞–Ω—Ç—Ä"""
    mantra_text = random.choice(MANTRA_STUDENT)

    text = f"""
    üìø <b>–¢–≤–æ—è –º–∞–Ω—Ç—Ä–∞ –Ω–∞ —Å–µ–π—á–∞—Å:</b>
    
    {mantra_text}
    
    <i>–ü—Ä–æ–∏–∑–Ω–µ—Å–∏ —ç—Ç–æ –ø—Ä–æ —Å–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑. –ü–æ–≤–µ—Ä—å –≤ —ç—Ç–∏ —Å–ª–æ–≤–∞.</i>
    """.strip()

    # –ò–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∞ –¥–ª—è –Ω–æ–≤–æ–π –º–∞–Ω—Ç—Ä—ã
    keyboard = [[InlineKeyboardButton("üîÑ –î—Ä—É–≥–∞—è –º–∞–Ω—Ç—Ä–∞", callback_data='new_mantra')]]
    reply_markup = InlineKeyboardMarkup(keyboard)

    await update.message.reply_text(text, reply_markup=reply_markup, parse_mode='HTML')


    # ==================== –°–û–í–ï–¢–´ –î–õ–Ø –°–¢–£–î–ï–ù–¢–û–í ====================
    async def student_tips(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –ø–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ"""
    tips = [
        "üìñ <b>–†–∞–∑–±–µ–π –º–∞—Ç–µ—Ä–∏–∞–ª –Ω–∞ —á–∞—Å—Ç–∏</b> –ø–æ 25 –º–∏–Ω—É—Ç (—Ç–µ—Ö–Ω–∏–∫–∞ Pomodoro) - 25 –º–∏–Ω—É—Ç —É—á–µ–±—ã, 5 –º–∏–Ω—É—Ç –æ—Ç–¥—ã—Ö–∞",
        "üí§ <b>–ù–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ —Å–æ–Ω</b> - 7-8 —á–∞—Å–æ–≤ —Å–Ω–∞ –≤–∞–∂–Ω–µ–µ –æ–¥–Ω–æ–π –Ω–æ—á–∏ –∑—É–±—Ä–µ–∂–∫–∏",
        "üö∂ <b>–î–µ–ª–∞–π –ø–µ—Ä–µ—Ä—ã–≤—ã</b> - –≤—Å—Ç–∞–Ω—å, –ø—Ä–æ–π–¥–∏—Å—å, —Å–¥–µ–ª–∞–π –ª–µ–≥–∫—É—é —Ä–∞–∑–º–∏–Ω–∫—É",
        "üíß <b>–ü–µ–π –≤–æ–¥—É</b> - –æ–±–µ–∑–≤–æ–∂–∏–≤–∞–Ω–∏–µ —É—Å–∏–ª–∏–≤–∞–µ—Ç —Å—Ç—Ä–µ—Å—Å –∏ —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é",
        "üçé <b>–ü–∏—Ç–∞–π—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ</b> - –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞–π –ø—Ä–∏–µ–º—ã –ø–∏—â–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –∑–∞–≤—Ç—Ä–∞–∫",
        "üéß <b>–ò—Å–ø–æ–ª—å–∑—É–π –±–µ–ª—ã–π —à—É–º</b> –∏–ª–∏ —Å–ø–æ–∫–æ–π–Ω—É—é –º—É–∑—ã–∫—É –¥–ª—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏",
        "üìù <b>–°–æ—Å—Ç–∞–≤—å –ø–ª–∞–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏</b> - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –º–∞—Ç–µ—Ä–∏–∞–ª –ø–æ —Ç–µ–º–∞–º",
        "üîÑ <b>–ü–æ–≤—Ç–æ—Ä—è–π –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–µ</b> - –ª—É—á—à–µ –ø–æ 15 –º–∏–Ω—É—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å, —á–µ–º 5 —á–∞—Å–æ–≤ –ø–µ—Ä–µ–¥ —ç–∫–∑–∞–º–µ–Ω–æ–º"
    ]

    text = "üìö <b>–ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —Å–µ—Å—Å–∏–∏:</b>\n\n" + "\n\n".join(tips)
    await update.message.reply_text(text, parse_mode='HTML')

    # ==================== –ú–ï–ù–Æ –ü–†–ï–ü–û–î–ê–í–ê–¢–ï–õ–Ø ====================
    async def teacher_menu(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ú–µ–Ω—é –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π"""
    text = """
    üë®‚Äçüè´ <b>–†–∞–∑–¥–µ–ª –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</b>
    
    –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤–æ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏:
    """.strip()

    keyboard = [
        ['üíå –®–∞–±–ª–æ–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏'],
        ['‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∏—Ç—å'],
        ['üîô –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é']
    ]
    reply_markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
    await update.message.reply_text(text, reply_markup=reply_markup, parse_mode='HTML')


    # ==================== –®–ê–ë–õ–û–ù–´ –ü–û–î–î–ï–†–ñ–ö–ò ====================
    async def support_templates(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤"""
    template = random.choice(SUPPORT_TEMPLATES)

    text = f"""
    üíå <b>–®–∞–±–ª–æ–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞:</b>
    
    "{template}"
    
    <i>–°–∫–æ–ø–∏—Ä—É–π –∏ –æ—Ç–ø—Ä–∞–≤—å —Å—Ç—É–¥–µ–Ω—Ç—É</i>
    """.strip()

    # –ò–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
    keyboard = [[InlineKeyboardButton("üîÑ –î—Ä—É–≥–æ–π —à–∞–±–ª–æ–Ω", callback_data='new_template')]]
    reply_markup = InlineKeyboardMarkup(keyboard)

    await update.message.reply_text(text, reply_markup=reply_markup, parse_mode='HTML')


    # ==================== –≠–ö–°–¢–†–ï–ù–ù–ê–Ø –ü–û–ú–û–©–¨ ====================
    async def emergency_help(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏"""
    text = """
    üÜò <b>–≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å</b>
    
    –ï—Å–ª–∏ —Ç–µ–±–µ –æ—á–µ–Ω—å —Ç—è–∂–µ–ª–æ –∏ —Ç—ã –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è:
    
    üìû <b>–¢–µ–ª–µ—Ñ–æ–Ω—ã –¥–æ–≤–µ—Ä–∏—è (–∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ):</b>
    ‚Ä¢ <code>8 (800) 200-0-122</code> - –ï–¥–∏–Ω—ã–π –æ–±—â–µ—Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω –¥–æ–≤–µ—Ä–∏—è
    ‚Ä¢ <code>8 (495) 989-50-50</code> - –ú–æ—Å–∫–æ–≤—Å–∫–∞—è —Å–ª—É–∂–±–∞ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–æ–º–æ—â–∏
    ‚Ä¢ <code>8 (800) 333-44-34</code> - –¶–µ–Ω—Ç—Ä —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–æ–º–æ—â–∏ –ú–ß–°
    
    üíô <b>–ü–æ–º–Ω–∏:</b>
    ‚Ä¢ –û–±—Ä–∞—â–∞—Ç—å—Å—è –∑–∞ –ø–æ–º–æ—â—å—é - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
    ‚Ä¢ –¢—ã –Ω–µ –æ–¥–∏–Ω –≤ —Å–≤–æ–∏—Ö –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è—Ö  
    ‚Ä¢ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—ã –≥–æ—Ç–æ–≤—ã –≤—ã—Å–ª—É—à–∞—Ç—å –∏ –ø–æ–º–æ—á—å –∞–Ω–æ–Ω–∏–º–Ω–æ
    
    üè• <b>–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å–∫–∞—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–ª—É–∂–±–∞:</b>
    [–ó–î–ï–°–¨ –£–ö–ê–ñ–ò–¢–ï –ö–û–ù–¢–ê–ö–¢–´ –í–ê–®–ï–ì–û –í–£–ó–ê]
    
    <i>–¢—ã –≤–∞–∂–µ–Ω. –¢—ã —Ü–µ–Ω–µ–Ω. –ü–æ–º–æ—â—å —Ä—è–¥–æ–º.</i>
    """.strip()

    await update.message.reply_text(text, parse_mode='HTML')


    # ==================== –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ë–û–¢–ï ====================
    async def about(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ"""
    text = """
    ‚ÑπÔ∏è <b>–û –±–æ—Ç–µ ¬´–ê–Ω—Ç–∏–ü–∞–Ω–∏–∫–∞¬ª</b>
    
    ü§ñ –Ø —Å–æ–∑–¥–∞–Ω, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å —Å—Ç—É–¥–µ–Ω—Ç–∞–º –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º –≤–æ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏.
    
    <b>–ß—Ç–æ —è —É–º–µ—é:</b>
    ‚Ä¢ üå¨Ô∏è –ü—Ä–æ–≤–æ–¥–∏—Ç—å –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ (2-3 –º–∏–Ω—É—Ç—ã)
    ‚Ä¢ üåç –ü–æ–º–æ–≥–∞—Ç—å —Ç–µ—Ö–Ω–∏–∫–∞–º–∏ –∑–∞–∑–µ–º–ª–µ–Ω–∏—è (5-4-3-2-1) 
    ‚Ä¢ üìø –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ –º–∞–Ω—Ç—Ä—ã
    ‚Ä¢ üíå –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —à–∞–±–ª–æ–Ω—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
    ‚Ä¢ üÜò –ù–∞–ø—Ä–∞–≤–ª—è—Ç—å –∫ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏
    
    <b>–î–ª—è –∫–æ–≥–æ —è:</b>
    ‚Ä¢ üéì –°—Ç—É–¥–µ–Ω—Ç—ã - —á—Ç–æ–±—ã —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å —Ç—Ä–µ–≤–æ–≥–æ–π –ø–µ—Ä–µ–¥ —ç–∫–∑–∞–º–µ–Ω–∞–º–∏
    ‚Ä¢ üë®‚Äçüè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ - —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
    
    üí° <i>–ò—Å–ø–æ–ª—å–∑—É–π –º–µ–Ω—è –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è, –∫–æ–≥–¥–∞ —á—É–≤—Å—Ç–≤—É–µ—à—å —Ç—Ä–µ–≤–æ–≥—É –∏–ª–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ</i>
    
    üÜì <b>–ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ!</b>
    üîí <b>–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ</b> - –º—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤–∞—à–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    
    <i>–ë–æ—Ç —Å–æ–∑–¥–∞–Ω –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö</i>
    """.strip()

    await update.message.reply_text(text, parse_mode='HTML')


    # ==================== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò INLINE –ö–ù–û–ü–û–ö ====================
    async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∏–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∏"""
    query = update.callback_query
    await query.answer()  # –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ callback —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å "—á–∞—Å–∏–∫–∏"

    if query.data == 'new_mantra':
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—É—é –º–∞–Ω—Ç—Ä—É
        new_mantra = random.choice(MANTRA_STUDENT)
        new_text = f"üìø <b>–ù–æ–≤–∞—è –º–∞–Ω—Ç—Ä–∞ –¥–ª—è —Ç–µ–±—è:</b>\n\n{new_mantra}\n\n<i>–ü—Ä–æ–∏–∑–Ω–µ—Å–∏ —ç—Ç–æ –ø—Ä–æ —Å–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑</i>"

        # –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        await query.edit_message_text(new_text, parse_mode='HTML')

    elif query.data == 'new_template':
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω
        new_template = random.choice(SUPPORT_TEMPLATES)
        new_text = f"üíå <b>–ù–æ–≤—ã–π —à–∞–±–ª–æ–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∏:</b>\n\n\"{new_template}\"\n\n<i>–°–∫–æ–ø–∏—Ä—É–π –∏ –æ—Ç–ø—Ä–∞–≤—å —Å—Ç—É–¥–µ–Ω—Ç—É</i>"

        await query.edit_message_text(new_text, parse_mode='HTML')
